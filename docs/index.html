<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EPA Data Helper for R â€¢ epair</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="EPA Data Helper for R">
<meta property="og:description" content="
  Aid the user in making queries to the EPA API site found at https://aqs.epa.gov/aqsweb/documents/data_api.
  This package combines API calling methods from various web scraping packages with specific strings to retrieve data from the EPA API. It also contains
  easy to use loaded variables that help a user navigate services offered by the API and aid the user in 
  determining the appropriate way to make a an API call.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">epair</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/epair.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/a01_ananomyEPARequest.html">The Anatomy of an EPA API request</a>
    </li>
    <li>
      <a href="articles/a02_ClarificationTerm.html">Clarification on terminology</a>
    </li>
    <li>
      <a href="articles/a03_Installation.html">Installation</a>
    </li>
    <li>
      <a href="articles/a04_setup.html">Setup</a>
    </li>
    <li>
      <a href="articles/a05_making-your-first-call.html">Making your first call</a>
    </li>
    <li>
      <a href="articles/a06_make-a-more-complex-call.html">Make a more complex call</a>
    </li>
    <li>
      <a href="articles/a07_wrap-up.html">Summary</a>
    </li>
    <li>
      <a href="articles/a08_Endpoints.html">Finding endpoints</a>
    </li>
    <li>
      <a href="articles/a09_Services.html">Navigating API Services</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/GLOrozcoM/epair/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="epair" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#epair" class="anchor"></a>epair</h1></div>
<!-- badges: start -->

<p>A package designed to aid in getting data from the Environmental Protection Agency (EPA) API at <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html" class="uri">https://aqs.epa.gov/aqsweb/documents/data_api.html</a>.</p>
<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h3>
<p>The <code>epair</code> package helps you determine what data you want and how to get that data from the EPA API. It provides loaded in variables that help you navigate services in the API, and a simple way to query the data. A comprehensive tutorial for using <code>epair</code> can be found at <a href="https://glorozcom.github.io/epair/" class="uri">https://glorozcom.github.io/epair/</a>.</p>
<p>Place the call using built-in service functions.</p>
<pre><code>&gt; result &lt;- get_daily_summary_in_state(bdate = "20190101",
                                       edate = "20190131",
                                       param = "44201",         # Ozone
                                       state.fips = "02")       # Alaska
&gt; alaska &lt;- result$Data</code></pre>
<p>Another approach giving the same results is manually placing the call by first finding the endpoint you need.</p>
<pre><code>&gt; services$`Daily Summary Data`$Filters$`By State`$Endpoint
[1] "dailyData/byState"</code></pre>
<p>Then place the call by specifying the appropriate endpoint.</p>
<pre><code>&gt; endpoint &lt;- "dailyData/byState"
&gt; vars &lt;-  list(bdate = "20190101",
                edate = "20190131",
                param = "44201",    # Ozone
                state = "02")       # Alaska
&gt; result &lt;- perform.call(endpoint, vars)
&gt; alaska &lt;- result$Data
##   state_code county_code site_number parameter_code poc latitude longitude
## 1         02         068        0003          44201   1  63.7232 -148.9676
## 2         02         068        0003          44201   1  63.7232 -148.9676
## 3         02         068        0003          44201   1  63.7232 -148.9676
## 4         02         068        0003          44201   1  63.7232 -148.9676
## 5         02         068        0003          44201   1  63.7232 -148.9676
## 6         02         068        0003          44201   1  63.7232 -148.9676
##   datum parameter         sample_duration pollutant_standard date_local
## 1 WGS84     Ozone                  1 HOUR  Ozone 1-hour 1979 2019-01-01
## 2 WGS84     Ozone 8-HR RUN AVG BEGIN HOUR  Ozone 8-Hour 1997 2019-01-01
## 3 WGS84     Ozone 8-HR RUN AVG BEGIN HOUR  Ozone 8-Hour 2008 2019-01-01
## 4 WGS84     Ozone 8-HR RUN AVG BEGIN HOUR  Ozone 8-hour 2015 2019-01-01
## 5 WGS84     Ozone                  1 HOUR  Ozone 1-hour 1979 2019-01-02
## 6 WGS84     Ozone 8-HR RUN AVG BEGIN HOUR  Ozone 8-Hour 1997 2019-01-02
##    units_of_measure event_type observation_count observation_percent
## 1 Parts per million       None                24                 100
## 2 Parts per million       None                24                 100
## 3 Parts per million       None                24                 100
## 4 Parts per million       None                17                 100
## 5 Parts per million       None                24                 100
## 6 Parts per million       None                24                 100
##   validity_indicator arithmetic_mean first_max_value first_max_hour aqi
## 1                  Y        0.042667           0.045              9  NA
## 2                  Y        0.041917           0.044              5  41
## 3                  Y        0.041917           0.044              5  41
## 4                  Y        0.041588           0.044              7  41
## 5                  Y        0.036708           0.040              1  NA
## 6                  Y        0.035708           0.039              0  36
##   method_code                      method                 local_site_name
## 1         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
## 2         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
## 3         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
## 4         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
## 5         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
## 6         047 INSTRUMENTAL - ULTRA VIOLET Denali NP &amp; PRES - Headquarters
##           site_address  state  county          city cbsa_code cbsa
## 1 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
## 2 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
## 3 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
## 4 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
## 5 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
## 6 DENALI NATIONAL PARK Alaska Denali  Not in a city      &lt;NA&gt; &lt;NA&gt;
##   date_of_last_change
## 1          2020-02-26
## 2          2020-02-26
## 3          2020-02-26
## 4          2020-02-26
## 5          2020-02-26
## 6          2020-02-26</code></pre>
</div>
<div id="installation" class="section level3">
<h3 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h3>
<p>You can download the latest release from this repo using <code>devtools</code>.</p>
<pre><code>devtools::install.github("GLOrozcoM/epair")</code></pre>
<p>Or, download these files and in your working directory run</p>
<pre><code>devtools::install("GLOrozcoM/epair")</code></pre>
<p><code>epair</code> depends on <code>httr</code> for making its data calls and <code>rvest</code> for creating the variables loaded in with the package. We recommend having <code>httr</code> installed (automatically taken care of through package dependencies), and only installing <code>rvest</code> if youâ€™re curious about how package variables were made.</p>
</div>
<div id="key-features" class="section level3">
<h3 class="hasAnchor">
<a href="#key-features" class="anchor"></a>Key features</h3>
<p>Look at variables to glean more information on the kind of data call you want to make.</p>
<ul>
<li>
<code>services</code> provides an easy to use container for all services and required calling variables for the API.</li>
<li>
<code>variables</code> gives you information on all required calling variables.</li>
<li>
<code>endpoints</code> offers a comprehensive list of every endpoint used in the API.</li>
</ul>
<p>Place your call without having to worry about string manipulations or JSON files.</p>
<ul>
<li>corresponding <code>get</code> functions will take the required variables and will automatically use the correct endpoint, providing the user with the result as a dataframe.</li>
<li>
<code><a href="reference/perform.call.html">perform.call()</a></code> will take an endpoint and variables and provided the user with metadata and desired data as a dataframe.</li>
<li>
<code><a href="reference/perform.call.raw.html">perform.call.raw()</a></code> will give the same results as <code><a href="reference/perform.call.html">perform.call()</a></code> except for in JSON format.</li>
</ul>
<p>Caching is automatically supported through internal use of <code>R.cache</code>.</p>
</div>
<div id="usage-notes" class="section level2">
<h2 class="hasAnchor">
<a href="#usage-notes" class="anchor"></a>Usage notes</h2>
<p>Note that currently a single call to AQS allows for at maximum a single yearâ€™s worth of data. Youâ€™ll need to create separate calls to get multiple yearâ€™s worth of data.</p>
<div id="ropenaq" class="section level3">
<h3 class="hasAnchor">
<a href="#ropenaq" class="anchor"></a>ropenaq</h3>
<p>You may want to check out <code>ropenaq</code> instead depending on the goals behind your study. <code>ropenaq</code> is an R wrapper for accessing the OpenAQ API - see its website <a href="https://docs.ropensci.org/ropenaq/">here</a>. Here are a few differences:</p>
<ul>
<li><p><code>epair</code> will get data from a single source (EPA AQS API), while <code>ropenaq</code> will be more useful if youâ€™re trying to compare data from different sources.</p></li>
<li><p>If youâ€™re interested in data for the US only, <code>epair</code> would be an appropriate choice. For more locations across the world, <code>ropenaq</code> would work better.</p></li>
<li><p><code>epairâ€™s</code> data source does offer more granularity than OpenAQ for US data. The EPA AQS API can give over 500 parameters/pollutants of interest (as opposed to OpenAQâ€™s 5), county level coverage, and unaggregated raw data. By default, OpenAQ will give aggregated data so if youâ€™re only interested in aggregations, then OpenAQ is the way to go.</p></li>
</ul>
</div>
<div id="terms-of-service" class="section level3">
<h3 class="hasAnchor">
<a href="#terms-of-service" class="anchor"></a>Terms of Service</h3>
<p>Make sure you also see the Usage Tips and Terms of Service associated with using this API at <a href="https://aqs.epa.gov/aqsweb/documents/data_api.html" class="uri">https://aqs.epa.gov/aqsweb/documents/data_api.html</a>.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/GLOrozcoM/epair/">https://â€‹github.com/â€‹GLOrozcoM/â€‹epair/â€‹</a>
</li>
<li>Report a bug at <br><a href="https://github.com/GLOrozcoM/epair/issues">https://â€‹github.com/â€‹GLOrozcoM/â€‹epair/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></small></li>
</ul>
</div>
<div class="community">
<h2>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
<li><a href="CODE_OF_CONDUCT.html">Code of conduct</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>G.L. Orozco-Mulfinger <br><small class="roles"> Author, maintainer </small>  </li>
<li>Madyline Lawrence <br><small class="roles"> Author </small>  </li>
<li>Owais Gilani <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://doi.org/10.5281/zenodo.4309792"><img src="https://zenodo.org/badge/DOI/10.5281/zenodo.4309792.svg" alt="DOI"></a></li>
<li><a href="https://github.com/GLOrozcoM/epair/actions"><img src="https://github.com/GLOrozcoM/epair/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by G.L. Orozco-Mulfinger, Madyline Lawrence, Owais Gilani.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
